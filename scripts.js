document.addEventListener('DOMContentLoaded',()=>{const e=document.querySelectorAll('.semester'),t=document.querySelector('.summary table tbody'),n=document.querySelector('.score'),s=document.querySelector('.result button.valid'),l=e=>{if(0===e.length)return 0;const t=e.filter(e=>{const t=parseFloat(e);return!isNaN(t)&&t>=0&&t<=20});const n=t.reduce((e,t)=>e+parseFloat(t),0);return t.length>0?n/t.length:0},c=e=>{const t=e.querySelectorAll('.note-cell'),n=Array.from(t).map(e=>e.textContent.trim()),s=l(n).toFixed(2),c=t=>{const e=t.querySelector(`tr:nth-child(${t+1})`);e.querySelector('td:nth-child(2)').textContent=s;const l=l(),c=c();u(l),p()},u=parseFloat(l()).toFixed(2);n.textContent=u,d()},u=e=>{const t=parseFloat(e.textContent.trim()),n=e.previousElementSibling;if(t<0||isNaN(t)||t>20)return void(e.textContent='',e.classList.add('alert'),setTimeout(()=>{e.classList.remove('alert'),n.textContent='',c(e)},1500));t>=0&&t<5?n.textContent='Ajournée':t>=5&&t<10?n.textContent='Non validé':t>=10&&t<=20&&(n.textContent='Validé'),c(e)},d=e=>{let t=0,n=0;e.forEach(e=>{const s=e.querySelectorAll('.note-cell'),l=Array.from(s).map(e=>parseFloat(e.textContent.trim())).filter(e=>!isNaN(e)&&e>=0&&e<=20),c=l.reduce((e,t)=>e+t,0);t+=c,n+=l.length});return n>0?(t/n).toFixed(2):'0'},document.getElementById('prev').addEventListener('click',()=>{const e=document.querySelector('.semester-btn.active');e&&e.previousElementSibling&&e.previousElementSibling.click()}),document.getElementById('next').addEventListener('click',()=>{const e=document.querySelector('.semester-btn.active');e&&e.nextElementSibling&&e.nextElementSibling.click()}),document.querySelectorAll('.semester-btn').forEach(e=>{e.addEventListener('click',function(){const t=parseInt(this.getAttribute('data-semester'),10)-1,n=1.03*document.querySelector('.semester').offsetWidth*t;document.querySelector('.container').scrollTo({left:n,behavior:'smooth'}),document.querySelectorAll('.semester-btn').forEach(e=>{e.classList.remove('active')}),this.classList.add('active')})}),document.querySelector('.semester-btn[data-semester="1"]').click(),n.textContent=d(),p()},p=()=>{const e=parseFloat(n.textContent);isNaN(e)?s.textContent='':e>=10?s.textContent='Validé':e>=5?s.textContent='Non validé':s.textContent='Ajournée'}
